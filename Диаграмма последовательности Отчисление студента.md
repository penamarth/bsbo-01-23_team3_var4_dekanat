@startuml
package Core <<Rectangle>> {
  package Domain <<Rectangle>> {
    class Group {
      + int id
      - String groupCode
      - int courseNumber
      - List<Student> students
    }
  
    class Student {
      + int id
      - String firstName
      - String lastName
      - String middleName
      - Group group
      - String code
      - int statusId
      + List<AcademicRecord> academicRecords
    }

    class StudentStatus {
      + int id
      - String name
    }

    abstract class Document {
      + String id
      - Date date
    }

    class EnrollmentDocument {
      + String id
      - int studentId
      - Date date
    }

    class ExpulsionDocument {
      + String id
      - int studentId
      - Date date
    }

    class User {
      + int id
      - String firstName
      - String lastName
      - String middleName
      - String role
    }
  
    class AcademicRecord {
      + int id
      + String subject
      - int grade
      - Date date
      - Student student
    }
  }
  
  package Application <<Rectangle>> {
    namespace Interfaces {
      interface IAcademicRecordsService {
        + addGrade()
        + calculateGPA()
        + getTranscript()
      }

      interface IEducationalDepartmentService {
        + checkRequestStatus()
        + sendTransferRequest()
      }
  
      interface IGroupsService {
        + createGroup()
        + disbandGroup()
        + transferStudent()
        + getGroupInfo()
        + addStudent()
        + removeStudent()
      }

      interface IDigitalDocumentManager {
        + registerDocument()
        + getById()
      }

      interface IStudentsService {
        + createStudent()
        + expellStudent()
        + transferStudent()
        + getStudentInfo()
      }

      interface IAcademicRecordsRepository {
        + add()
        + getById()
        + getAll()
        + update()
        + delete()
      }

      interface IGroupsRepository {
        + add()
        + getById()
        + getAll()
        + update()
        + delete()
      }

      interface IStudentsRepository {
        + add()
        + getById()
        + getAll()
        + update()
        + delete()
      }
    }
    namespace Services {
      class AcademicRecordsService {
        - IAcademicRecordsRepository academicRecordsRepository;
        + addGrade()
        + calculateGPA()
        + getTranscript()
      }
  
      class GroupsService {
        - IGroupsRepository groupsRepository;
        + createGroup()
        + disbandGroup()
        + transferStudent()
        + getGroupInfo()
        + addStudent()
        + removeStudent()
      }

      class StudentsService {
        - IStudentsRepository studentsRepository;
        + createStudent()
        + expellStudent()
        + transferStudent()
        + getStudentInfo()
      }
    }
  }
}

package Infrastructure <<Rectangle>> {
  class DbContext {
    + List<Student> students
    + List<Group> groups
    + List<AcademicRecord> records
  }
  class AcademicRecordsRepository {
    - DbContext dbContext;
    + add()
    + getById()
    + getAll()
    + update()
    + delete()
  }

  class GroupsRepository {
    - DbContext dbContext;
    + add()
    + getById()
    + getAll()
    + update()
    + delete()
  }

  class StudentsRepository {
    - DbContext dbContext;
    + add()
    + getById()
    + getAll()
    + update()
    + delete()
  }

  class EducationalDepartmentService {
    + checkRequestStatus()
    + sendTransferRequest()
  }

  class DigitalDocumentManager {
    + registerDocument()
    + getById()
  }
}

package Presentation <<Rectangle>> {
  class DeanOfficeController {
    - DeanWorker deanWorker
    - StudentManager studentManager
    - GroupManager groupManager
    - AcademicRecordManager academicRecordManager
    + enrollStudent()
    + expellStudent()
    + transferStudent()
    + updateAcademicPerformance()
  }
}

package UI <<Rectangle>> {
    class UI {
    + main()
  }
}

UI ..> DeanOfficeController

DeanOfficeController --> IStudentsService
DeanOfficeController --> IGroupsService
DeanOfficeController --> IAcademicRecordsService
DeanOfficeController --> IEducationalDepartmentService
DeanOfficeController --> IDigitalDocumentManager

IAcademicRecordsService ..|> AcademicRecordsService
IEducationalDepartmentService ..|> EducationalDepartmentService
IGroupsService ..|> GroupsService
IDigitalDocumentManager ..|> DigitalDocumentManager
IStudentsService ..|> StudentsService

IAcademicRecordsRepository ..|> AcademicRecordsRepository
IGroupsRepository ..|> GroupsRepository
IStudentsRepository ..|> StudentsRepository

AcademicRecordsRepository --> DbContext
GroupsRepository --> DbContext
StudentsRepository --> DbContext

AcademicRecordsService --> IAcademicRecordsRepository
GroupsService --> IGroupsRepository
StudentsService --> IStudentsRepository

DbContext --> Student
DbContext --> Group
DbContext --> AcademicRecord
DigitalDocumentManager --> Document

Student "1" --o "1" Group
Student "1" --o "n" AcademicRecord
Student "1" --* "1" StudentStatus

Document ..|> EnrollmentDocument
Document ..|> ExpulsionDocument
@enduml
